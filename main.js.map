{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/cards.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/index.js"],"sourcesContent":["//Конфиг http-запросов\r\nconst config = {\r\n  path: \"https://nomoreparties.co/v1\",\r\n  cohortId: \"wff-cohort-17\",\r\n  headers: {\r\n    authorization: \"1d7c5a36-10fe-4288-b8a8-123b41ec80c9\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\n//Запросы на сервер----------------------------------------------------------------\r\n\r\nconst handleRequest = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\n// Получение данных пользователя с сервера\r\nconst getUserProfile = () => {\r\n  return fetch(`${config.path}/${config.cohortId}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then(handleRequest);\r\n};\r\n\r\n//Получение данных карточек\r\nconst getCards = () => {\r\n  return fetch(`${config.path}/${config.cohortId}/cards`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then(handleRequest);\r\n};\r\n\r\n//Обновление профиля\r\nconst updateProfileByUser = (name, about) => {\r\n  return fetch(`${config.path}/${config.cohortId}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then(handleRequest);\r\n};\r\n\r\n// замена аватара\r\nconst updateAvatar = (avatarUrl) => {\r\n  return fetch(`${config.path}/${config.cohortId}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatarUrl,\r\n    }),\r\n  }).then(handleRequest);\r\n};\r\n\r\n//Добавление новой карточки\r\nconst handleCardAdded = (nameCard, linkCard) => {\r\n  return fetch(`${config.path}/${config.cohortId}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: nameCard,\r\n      link: linkCard,\r\n    }),\r\n  }).then(handleRequest);\r\n};\r\n\r\n//Добавление лайка\r\nconst addLike = (cardId) => {\r\n  return fetch(`${config.path}/${config.cohortId}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then(handleRequest);\r\n};\r\n\r\n//Снятие лайка\r\nconst deleteLike = (cardId) => {\r\n  return fetch(`${config.path}/${config.cohortId}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(handleRequest);\r\n};\r\n\r\n//Удаление карточки\r\nconst deleteCard = (cardId) => {\r\n  return fetch(`${config.path}/${config.cohortId}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(handleRequest);\r\n};\r\n\r\nexport {\r\n  updateProfileByUser,\r\n  updateAvatar,\r\n  handleCardAdded,\r\n  deleteCard,\r\n  addLike,\r\n  deleteLike,\r\n  getUserProfile,\r\n  getCards,\r\n};\r\n","// @todo: Темплейт карточки\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n// DOM узлы\r\nconst placesList = document.querySelector(\".places__list\"); //Карточка\r\n\r\nimport { addLike, deleteLike } from \"./api.js\";\r\n\r\nfunction createCard(card, userId, { handleImageClick, openDeleteModal }) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true); // клонирование\r\n\r\n  const cardImage = cardElement.querySelector(\".card__image\"); // картинка определение константы\r\n  cardElement.querySelector(\".card__title\").textContent = card.name; //название карточки\r\n  cardImage.alt = card.name; // название изображения\r\n  cardImage.src = card.link; // ссылка на изображение\r\n  //лайки на карточке\r\n  const countLike = cardElement.querySelector(\".card__like-count\"); //счетчик кнопки лайк\r\n  const likeButton = cardElement.querySelector(\".card__like-button\"); //кнопка лайк\r\n  countLike.textContent = card.likes.length;\r\n\r\n  //обработчик открытия попапа/картинка\r\n  cardImage.addEventListener(\"click\", function () {\r\n    handleImageClick(card.link, card.name);\r\n  });\r\n\r\n  //установка лайка при перезагрузке\r\n  if (card.likes.some((like) => like._id === userId)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  //обработчик лайка карточки\r\n  cardElement\r\n    .querySelector(\".card__like-button\")\r\n    .addEventListener(\"click\", function (evt) {\r\n      if (likeButton.classList.contains(\"card__like-button_is-active\")) {\r\n        deleteLike(card._id)\r\n          .then((card) => {\r\n            likeButton.classList.toggle(\"card__like-button_is-active\");\r\n            countLike.textContent = card.likes.length;\r\n          })\r\n          .catch((error) => console.error(\"Ошибка удаления лайка:\", error));\r\n      } else {\r\n        addLike(card._id)\r\n          .then((card) => {\r\n            likeButton.classList.toggle(\"card__like-button_is-active\");\r\n            countLike.textContent = card.likes.length;\r\n          })\r\n          .catch((error) => console.error(\"Ошибка добавления лайка:\", error));\r\n      }\r\n    });\r\n\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  // Удаление кнопки удаления, если пользователь не владелец карточки\r\n  if (card.owner._id !== userId) {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  //обработчик открытия попапа удаления карточки\r\n  deleteButton.addEventListener(\"click\", () =>\r\n    openDeleteModal(cardElement, card._id)\r\n  );\r\n\r\n  cardElement.dataset.id = card._id;\r\n\r\n  return cardElement; // возвращение\r\n}\r\n\r\n//функция лайка карточки\r\nfunction likeCard(evt) {\r\n  evt.target.classList.toggle(\"card__like-button_is-active\");\r\n}\r\n\r\nexport { createCard, likeCard, placesList };\r\n","//функция открытия попапа\r\nconst openModal = (modal) => {\r\n  modal.classList.add(\"popup_is-animated\"); // анимация\r\n  setTimeout(() => {\r\n    modal.classList.add(\"popup_is-opened\"); // открытие\r\n  }, 1);\r\n\r\n  // Навешиваем обработчик Escape\r\n  document.addEventListener(\"keydown\", handleEscape);\r\n};\r\n\r\n//функция закрытия попапа\r\nfunction closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", handleEscape);\r\n}\r\n\r\n// Функция обработки нажатия клавиши Escape\r\nfunction handleEscape(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup_is-opened\");\r\n    if (openedPopup) {\r\n      closeModal(openedPopup);\r\n    }\r\n  }\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","// Функция, которая включает валидацию для всех форм\r\nconst enableValidation = (settings) => {\r\n  const formList = Array.from(document.querySelectorAll(settings.formSelector));\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListeners(formElement, settings);\r\n  });\r\n};\r\n\r\n// Функция, которая добавляет класс с ошибкой\r\nconst showInputError = (formElement, input, errorMessage, settings) => {\r\n  const errorElement = formElement.querySelector(`.${input.id}-error`);\r\n  input.classList.add(settings.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(settings.errorClass);\r\n};\r\n\r\n// Функция, которая удаляет класс с ошибкой\r\nconst hideInputError = (formElement, input, settings) => {\r\n  // Находим элемент ошибки\r\n  const errorElement = formElement.querySelector(`.${input.id}-error`);\r\n\r\n  input.classList.remove(settings.inputErrorClass);\r\n  errorElement.classList.remove(settings.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\n// Функция, которая проверяет валидность поля\r\nconst isValid = (formElement, input, settings) => {\r\n  if (input.validity.patternMismatch) {\r\n    // встроенный метод setCustomValidity принимает на вход строку\r\n    // и заменяет ею стандартное сообщение об ошибке\r\n    input.setCustomValidity(input.dataset.errorMessage);\r\n  } else {\r\n    // если передать пустую строку, то будут доступны\r\n    // стандартные браузерные сообщения\r\n    input.setCustomValidity(\"\");\r\n  }\r\n  if (!input.validity.valid) {\r\n    showInputError(formElement, input, input.validationMessage, settings);\r\n  } else {\r\n    // hideInputError теперь получает параметром форму, в которой\r\n    // находится проверяемое поле, и само это поле\r\n    hideInputError(formElement, input, settings);\r\n  }\r\n};\r\n\r\nconst setEventListeners = (formElement, settings) => {\r\n  // Находим все поля внутри формы\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(settings.inputSelector)\r\n  );\r\n  const buttonList = Array.from(\r\n    formElement.querySelectorAll(settings.submitButtonSelector)\r\n  );\r\n  //переключение кнопки\r\n  toggleButtonState(inputList, buttonList, settings);\r\n\r\n  // Обойдём все элементы полученной коллекции\r\n  inputList.forEach((input) => {\r\n    // каждому полю добавим обработчик события input\r\n    input.addEventListener(\"input\", function () {\r\n      isValid(formElement, input, settings);\r\n      toggleButtonState(inputList, buttonList, settings);\r\n    });\r\n  });\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (inputList, buttonList, settings) => {\r\n  buttonList.forEach((button) => {\r\n    button.disabled = true;\r\n    if (hasInvalidInput(inputList)) {\r\n      button.disabled = true;\r\n      button.classList.add(settings.inactiveButtonClass);\r\n    } else {\r\n      button.disabled = false;\r\n      button.classList.remove(settings.inactiveButtonClass);\r\n    }\r\n  });\r\n};\r\n\r\n// Функция, которая очищает ошибки валидации формы и делает кнопку неактивной\r\nconst clearValidation = (formElement, settings) => {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(settings.inputSelector)\r\n  );\r\n  const buttonList = Array.from(\r\n    formElement.querySelectorAll(settings.submitButtonSelector)\r\n  );\r\n\r\n  inputList.forEach((input) => {\r\n    hideInputError(formElement, input, settings);\r\n    input.value = \"\"; // очищаем значение поля\r\n  });\r\n  toggleButtonState(inputList, buttonList, settings);\r\n};\r\n\r\nexport { enableValidation, clearValidation };\r\n","// @todo: DOM узлы\r\nconst buttonAddCard = document.querySelector(\".profile__add-button\"); //Кнопка_+\r\nconst buttonProfileEdit = document.querySelector(\".profile__edit-button\"); //Кнопка_edit\r\nconst popupEdit = document.querySelector(\".popup_type_edit\"); //Попап редактирования профиля\r\nconst popupAddCard = document.querySelector(\".popup_type_new-card\"); //Попап создания новой карточки\r\nconst buttonAddCardPopup = popupAddCard.querySelector(\".popup__button\");\r\n//константы формы добавления карточки\r\nconst popupFormImg = document.forms[\"new-place\"];\r\nconst formImgName = popupFormImg.elements[\"place-name\"];\r\nconst formImgLink = popupFormImg.elements[\"link\"];\r\n//константы формы редактирования профиля\r\nconst popupFormProfile = document.forms[\"edit-profile\"];\r\nconst nameInput = popupFormProfile.elements[\"name\"];\r\nconst jobInput = popupFormProfile.elements[\"description\"];\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileSubtitle = document.querySelector(\".profile__description\");\r\nconst buttonProfileEditPopup = popupFormProfile.querySelector(\".popup__button\");\r\n//константы модального окна картинки\r\nconst popImage = document.querySelector(\".popup__image\"); //картинка в модальном окне\r\nconst popImageDescription = document.querySelector(\".popup__caption\");\r\nconst popupImage = document.querySelector(\".popup_type_image\"); //Попап открытия картинки\\\r\n//константы профиля\r\nconst avatarElement = document.querySelector(\".profile__image\");\r\nconst avatarButton = document.querySelector(\".profile__image-button\");\r\n//попап редактирования автара\r\nconst popupAvatar = document.querySelector(\".popup_type_new-avatar\");\r\nconst avatarInput = document.querySelector(\".popup__input_type-vatar-link\");\r\nconst buttonAvatarPopup = popupAvatar.querySelector(\".popup__button\");\r\nlet userId = \"\";\r\n//карточки\r\nlet currentCardElement = null;\r\nlet currentCardId = null;\r\n//попап удаления карточки\r\nconst popupDeleteCard = document.querySelector(\r\n  \".popup_type_submit-delete-card\"\r\n);\r\nconst buttonDeletePopup = popupDeleteCard.querySelector(\".popup__button\");\r\n\r\nimport \"../index.css\";\r\nimport { createCard, likeCard, placesList } from \"./cards.js\";\r\nimport { openModal, closeModal } from \"./modal.js\";\r\nimport { enableValidation, clearValidation } from \"./validation.js\";\r\n\r\nimport {\r\n  updateProfileByUser,\r\n  updateAvatar,\r\n  handleCardAdded,\r\n  getUserProfile,\r\n  getCards,\r\n  deleteCard,\r\n} from \"./api.js\";\r\n\r\n//Функции----------------------------------------------------------------\r\n\r\nconst validationSettings = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"button_inactive\",\r\n  inputErrorClass: \"form__input-error\",\r\n  errorClass: \"form__input-error_active\",\r\n};\r\n\r\n// Вызов функции для включения валидации с переданными настройками\r\nenableValidation(validationSettings);\r\n\r\n//Объединенение запросов для получения данных пользователя и карточек\r\nconst getPromisesUserCards = () => {\r\n  Promise.all([getUserProfile(), getCards()])\r\n    .then(([userData, cardsData]) => {\r\n      //данные пользователя\r\n      profileTitle.textContent = userData.name;\r\n      profileSubtitle.textContent = userData.about;\r\n      avatarElement.style.backgroundImage = `url(${userData.avatar})`;\r\n      userId = userData._id;\r\n\r\n      // Обработка данных карточек\r\n      cardsData.forEach((cardData) => {\r\n        const cardElement = createCard(cardData, userId, {\r\n          handleImageClick,\r\n          openDeleteModal,\r\n        });\r\n        placesList.append(cardElement);\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Произошла ошибка\", error);\r\n    });\r\n};\r\n\r\n//функция добавления новой карточки пользователем\r\nfunction handleCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  const name = formImgName.value;\r\n  const link = formImgLink.value;\r\n  changeNameButton(buttonAddCardPopup, true);\r\n\r\n  handleCardAdded(name, link)\r\n    .then((cardData) => {\r\n      placesList.prepend(\r\n        createCard(cardData, userId, { handleImageClick, openDeleteModal })\r\n      );\r\n      evt.target.reset();\r\n      closeModal(popupAddCard);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Произошла ошибка при добавлении карточки\", error);\r\n    })\r\n    .finally(() => {\r\n      changeNameButton(buttonAddCardPopup, false);\r\n    });\r\n}\r\n\r\n// Функция открытия модального окна с картинкой\r\nconst handleImageClick = (imageSrc, imageDescription) => {\r\n  if (popImage) {\r\n    popImage.src = imageSrc;\r\n    popImage.alt = imageDescription;\r\n    popImageDescription.textContent = imageDescription;\r\n  }\r\n  openModal(popupImage);\r\n};\r\n\r\n//функция открытия попапа удаления карточки\r\nfunction openDeleteModal(cardElement, cardId) {\r\n  currentCardElement = cardElement;\r\n  currentCardId = cardId; //сохранение id карточки для удаления\r\n  openModal(popupDeleteCard);\r\n}\r\n\r\n//функция замены аватара\r\nconst handleAvatarForm = (evt) => {\r\n  evt.preventDefault();\r\n  const avatarUrl = avatarInput.value;\r\n  changeNameButton(buttonAvatarPopup, true);\r\n  updateAvatar(avatarUrl)\r\n    .then((data) => {\r\n      avatarElement.style.backgroundImage = `url(${data.avatar})`;\r\n      evt.target.reset();\r\n      closeModal(popupAvatar);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Произошла ошибка при замене аватара\", error);\r\n    })\r\n    .finally(() => {\r\n      changeNameButton(buttonAvatarPopup, false);\r\n    });\r\n};\r\n\r\n//Функция, смены названия кнопки при обработке данных в попапе\r\nconst changeNameButton = (button, isLoading) => {\r\n  button.textContent = isLoading ? \"Сохранение..\" : \"Сохранить\";\r\n};\r\n\r\n//Вызовы функций\r\ngetPromisesUserCards();\r\n\r\n//Обработчики событий----------------------------------------------------------------\r\n// обработчики событий при загрузке\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  setupEventListeners();\r\n});\r\n\r\n// Обработчики событий для всех модальных окон\r\nfunction setupEventListeners() {\r\n  document.querySelectorAll(\".popup\").forEach((modal) => {\r\n    modal.querySelectorAll(\".popup__close\").forEach((button) => {\r\n      button.addEventListener(\"click\", () => closeModal(modal));\r\n    });\r\n\r\n    modal.addEventListener(\"click\", (evt) => {\r\n      if (evt.target === modal) {\r\n        closeModal(modal);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n//Обработчик удаления карточки в попапе удаления карточки\r\nbuttonDeletePopup.addEventListener(\"click\", function () {\r\n  deleteCard(currentCardId)\r\n    .then(() => {\r\n      const cardToDeleteElement = document.querySelector(\r\n        `[data-id=\"${currentCardId}\"]`\r\n      );\r\n      if (cardToDeleteElement) {\r\n        cardToDeleteElement.remove();\r\n      } else {\r\n        console.error(`Карточка с id ${currentCardId} не найдена`);\r\n      }\r\n      closeModal(popupDeleteCard); // закрытие попапа после удаления\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка удаления карточки:\", error);\r\n    });\r\n});\r\n\r\n//Обработчик «отправки» формы\r\nfunction handleProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  changeNameButton(buttonProfileEditPopup, true);\r\n  //поля формы\r\n  const nameValue = nameInput.value;\r\n  const jobValue = jobInput.value;\r\n\r\n  updateProfileByUser(nameValue, jobValue)\r\n    .then((data) => {\r\n      profileTitle.textContent = data.name;\r\n      profileSubtitle.textContent = data.about;\r\n      clearValidation(popupEdit, validationSettings);\r\n      closeModal(popupEdit);\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\r\n        \"Произошла ошибка при обновлении данных пользователя\",\r\n        error\r\n      );\r\n    })\r\n    .finally(() => {\r\n      changeNameButton(buttonProfileEditPopup, false);\r\n    });\r\n}\r\n\r\n//обработчик «отправки» формы\r\npopupFormProfile.addEventListener(\"submit\", handleProfileFormSubmit);\r\n\r\n//обработчик открытия попапа/профиль\r\nbuttonProfileEdit.addEventListener(\"click\", function () {\r\n  //значения в модальном окне редактирования профиля\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileSubtitle.textContent;\r\n  openModal(popupEdit);\r\n});\r\n\r\n//обработчик открытия попапа/добавления\r\nbuttonAddCard.addEventListener(\"click\", function () {\r\n  openModal(popupAddCard);\r\n});\r\n\r\n//обработчик добавки новой карточки\r\npopupFormImg.addEventListener(\"submit\", handleCardFormSubmit);\r\n\r\n//Аватар------\r\n//Обработчик наведения на аватар/mouseover\r\navatarElement.addEventListener(\"mouseover\", () => {\r\n  avatarButton.classList.add(\"profile__image-button_active\");\r\n});\r\n\r\n//Обработчик наведения на аватар/mouseout\r\navatarElement.addEventListener(\"mouseout\", (evt) => {\r\n  if (!avatarElement.contains(evt.relatedTarget)) {\r\n    avatarButton.classList.remove(\"profile__image-button_active\");\r\n  }\r\n});\r\n\r\n//обработчик открытия редактирования аватара\r\navatarButton.addEventListener(\"click\", function () {\r\n  openModal(popupAvatar);\r\n});\r\n\r\n//обработчик «отправки» нового аватара\r\npopupAvatar.addEventListener(\"submit\", handleAvatarForm);\r\n"],"names":["config","path","cohortId","headers","authorization","handleRequest","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","placesList","createCard","card","userId","_ref","handleImageClick","openDeleteModal","cardElement","cloneNode","cardImage","textContent","name","alt","src","link","countLike","likeButton","likes","length","addEventListener","some","like","_id","classList","add","evt","cardId","contains","fetch","method","then","toggle","error","console","addLike","deleteButton","owner","remove","dataset","id","openModal","modal","setTimeout","handleEscape","closeModal","removeEventListener","key","openedPopup","hideInputError","formElement","input","settings","errorElement","inputErrorClass","errorClass","toggleButtonState","inputList","buttonList","forEach","button","disabled","validity","valid","hasInvalidInput","inactiveButtonClass","buttonAddCard","buttonProfileEdit","popupEdit","popupAddCard","buttonAddCardPopup","popupFormImg","forms","formImgName","elements","formImgLink","popupFormProfile","nameInput","jobInput","profileTitle","profileSubtitle","buttonProfileEditPopup","popImage","popImageDescription","popupImage","avatarElement","avatarButton","popupAvatar","avatarInput","buttonAvatarPopup","currentCardId","popupDeleteCard","buttonDeletePopup","validationSettings","formSelector","inputSelector","submitButtonSelector","Array","from","querySelectorAll","preventDefault","patternMismatch","setCustomValidity","errorMessage","showInputError","validationMessage","isValid","setEventListeners","imageSrc","imageDescription","changeNameButton","isLoading","all","_ref2","userData","cardsData","about","style","backgroundImage","avatar","cardData","append","target","cardToDeleteElement","value","body","JSON","stringify","data","clearValidation","nameCard","linkCard","prepend","reset","relatedTarget","avatarUrl","updateAvatar"],"sourceRoot":""}